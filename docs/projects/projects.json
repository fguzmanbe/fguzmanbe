[
  {
    "path": "projects/2023-11-12-ingreso-promedio-per-cpita/",
    "title": "Average Per Capita Income",
    "description": "We will work with the Lakner-Milanovic (2013) dataset to create some graphics on average per capita income (PPP 2005) during the period 1988-2008.",
    "author": [
      {
        "name": "Francisco Guzmán",
        "url": {}
      }
    ],
    "date": "2023-11-12",
    "categories": [
      "Lakner-Milanovic (2013)",
      "Shiny App"
    ],
    "contents": "\r\n\r\nContents\r\nLibrerías\r\nDatabase\r\nAcquisition\r\nImport\r\nVisualization\r\n\r\nGráfico\r\nSave\r\n\r\nMore Graphics\r\nChile vs Portugal\r\nChile vs Suecia\r\nChile vs Netherlands\r\nChile vs Spain and Bolivia\r\n\r\nInteractive Plot\r\nCódigo\r\nReferences\r\n\r\nLibrerías\r\nNote that by loading tidyverse, other packages are loaded as well. You can review them here.\r\n\r\n\r\nlibrary(haven)\r\nlibrary(tidyverse)\r\nlibrary(scales)\r\nlibrary(ggthemes)\r\nlibrary(gganimate)\r\nlibrary(plotly)\r\nlibrary(ggiraph)\r\nlibrary(Cairo)\r\n\r\n\r\nDatabase\r\nAcquisition\r\nGo to Lakner-Milanovic (2013) World Panel Income Distribution (LM-WPID) and download the file in STATA (.dta) format.\r\nImport\r\nSince the format is .dta, we use the read_dta command provided by the haven library.\r\n\r\n\r\ndf <- read_dta(\"lm_wpid_web.dta\")\r\nattach(df)\r\n\r\n\r\nVisualization\r\nSee the variables we will use in constructing our graph. For more information on these and the dataset in general, check the pdf.\r\n\r\n\r\nhead(df)[c(1,8,9,11)]\r\n\r\n# A tibble: 6 × 4\r\n  contcod bin_year group RRinc\r\n  <chr>      <dbl> <dbl> <dbl>\r\n1 AGO         1993     1   174\r\n2 AGO         1993     2   287\r\n3 AGO         1993     3   373\r\n4 AGO         1993     4   450\r\n5 AGO         1993     5   538\r\n6 AGO         1993     6   653\r\n\r\nGráfico\r\nThe filter() command allows us to select the countries we want to graph.\r\nThe pipe operator %>% allows us to perform multiple operations.\r\nThe girafe() command allows us to add a tooltip, making our graph more interactive. geom_point_interactive() should be added first.\r\n\r\n\r\ng1 <- df %>%\r\n  \r\n  filter(contcod %in% c(\"CHL\", \"ESP\")) %>% \r\n  \r\n  ggplot(aes(x = group, y = RRinc, color = contcod)) +\r\n  geom_point_interactive(aes(tooltip = RRinc)) +\r\n                           geom_line() +\r\n  labs(title = \"Average per Capita Income by Decile (PPP 2005)\",\r\n       subtitle = \"Chile vs Spain, 1988-2008\",\r\n       caption = \"Source: Own elaboration based on Lakner-Milanovic (2013)\",\r\n       x = \"Deciles\",\r\n       y = \"USD - PPP 2005\",\r\n       col = NULL) +\r\n       scale_color_manual(values = c(\"#DA0000\", \"#C4961A\")) +\r\n       scale_x_continuous(breaks=seq(1,10, by = 1), position = \"bottom\") +\r\n       scale_y_continuous(labels = dollar) +\r\n       facet_wrap(~bin_year, ncol = 3) +\r\n  theme(plot.title = element_text(size = rel(2)),\r\n        plot.subtitle = element_text(size = rel(1.4),\r\n                                     margin=margin(0,0,20,0)),\r\n        plot.caption = element_text(size = rel(.9),\r\n                                    hjust = 0,\r\n                                    face= \"italic\",\r\n                                    margin=margin(20,0,0,0)),\r\n        axis.text.x = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.text.y = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.ticks.length.x = unit(.2, \"cm\"),\r\n        axis.ticks.x = element_line(size = .3),\r\n        axis.ticks.length.y = unit(.2, \"cm\"),\r\n        axis.ticks.y = element_line(size = .3),\r\n        panel.grid.major.x = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.x = element_line(colour = \"grey92\"),\r\n        panel.grid.major.y = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.y = element_line(colour = \"grey87\"),\r\n        legend.position = c(0.87, 0.22),\r\n        legend.text = element_text(size = 13),\r\n        legend.key.size = unit(3,\"line\"))\r\n\r\ngirafe(ggobj = g1, width_svg = 8, height_svg = 6)\r\n\r\n\r\n\r\nSave\r\n\r\n\r\n# To save in png format\r\nggsave(g1, filename = \"plot.png\", type = 'cairo', dpi = 300,\r\n       width = 8, height = 6)\r\n\r\n# To save with higher quality (pdf or eps)\r\nggsave(g1, filename = \"plot.pdf\", device = cairo_pdf, dpi = 300,\r\n       width = 8, height = 6)\r\n\r\nggsave(g1, filename = \"plot.eps\", device = cairo_ps, dpi = 300,\r\n       width = 8, height = 6)\r\n\r\n\r\nMore Graphics\r\nChile vs Portugal\r\n\r\n\r\nShow code\r\n\r\ng2 <- df %>%\r\n  \r\n  filter(contcod %in% c(\"CHL\", \"PRT\")) %>% \r\n  \r\n  ggplot(aes(x = group, y = RRinc, color = contcod)) +\r\n  geom_point_interactive(aes(tooltip = RRinc)) +\r\n                           geom_line() +\r\n  labs(title = \"Average per Capita Income by Decile (PPP 2005)\",\r\n       subtitle = \"Chile vs Portugal, 1988-2008\",\r\n       caption = \"Source: Own elaboration based on Lakner-Milanovic (2013)\",\r\n       x = \"Deciles\",\r\n       y = \"USD - PPP 2005\",\r\n       col = NULL) +\r\n       scale_color_manual(values = c(\"#DA0000\", \"#239f40\")) +\r\n       scale_x_continuous(breaks=seq(1,10, by = 1), position = \"bottom\") +\r\n       scale_y_continuous(labels = dollar, limits = c(0, 30000)) +\r\n       facet_wrap(~bin_year, ncol = 3) +\r\n  theme(plot.title = element_text(size = rel(2)),\r\n        plot.subtitle = element_text(size = rel(1.4),\r\n                                     margin=margin(0,0,20,0)),\r\n        plot.caption = element_text(size = rel(.9),\r\n                                    hjust = 0,\r\n                                    face= \"italic\",\r\n                                    margin=margin(20,0,0,0)),\r\n        axis.text.x = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.text.y = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.ticks.length.x = unit(.2, \"cm\"),\r\n        axis.ticks.x = element_line(size = .3),\r\n        axis.ticks.length.y = unit(.2, \"cm\"),\r\n        axis.ticks.y = element_line(size = .3),\r\n        panel.grid.major.x = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.x = element_line(colour = \"grey92\"),\r\n        panel.grid.major.y = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.y = element_line(colour = \"grey87\"),\r\n        legend.position = c(0.87, 0.22),\r\n        legend.text = element_text(size = 13),\r\n        legend.key.size = unit(3,\"line\"))\r\n\r\ngirafe(ggobj = g2, width_svg = 8, height_svg = 6)\r\n\r\n\r\n\r\nChile vs Suecia\r\nNo data for Sweden in 1988.\r\n\r\n\r\nShow code\r\n\r\ng3 <- df %>%\r\n  \r\n  filter(contcod %in% c(\"CHL\", \"SWE\")) %>% \r\n  \r\n  ggplot(aes(x = group, y = RRinc, color = contcod)) +\r\n  geom_point_interactive(aes(tooltip = RRinc)) +\r\n                           geom_line() +\r\n  labs(title = \"Average per Capita Income by Decile (PPP 2005)\",\r\n       subtitle = \"Chile vs Sweden, 1988-2008\",\r\n       caption = \"Source: Own elaboration based on Lakner-Milanovic (2013)\",\r\n       x = \"Deciles\",\r\n       y = \"USD - PPP 2005\",\r\n       col = NULL) +\r\n       scale_color_manual(values = c(\"#DA0000\", \"#293352\")) +\r\n       scale_x_continuous(breaks=seq(1,10, by = 1), position = \"bottom\") +\r\n       scale_y_continuous(labels = dollar) +\r\n       facet_wrap(~bin_year, ncol = 3) +\r\n  theme(plot.title = element_text(size = rel(2)),\r\n        plot.subtitle = element_text(size = rel(1.4),\r\n                                     margin=margin(0,0,20,0)),\r\n        plot.caption = element_text(size = rel(.9),\r\n                                    hjust = 0,\r\n                                    face= \"italic\",\r\n                                    margin=margin(20,0,0,0)),\r\n        axis.text.x = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.text.y = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.ticks.length.x = unit(.2, \"cm\"),\r\n        axis.ticks.x = element_line(size = .3),\r\n        axis.ticks.length.y = unit(.2, \"cm\"),\r\n        axis.ticks.y = element_line(size = .3),\r\n        panel.grid.major.x = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.x = element_line(colour = \"grey92\"),\r\n        panel.grid.major.y = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.y = element_line(colour = \"grey87\"),\r\n        legend.position = c(0.87, 0.22),\r\n        legend.text = element_text(size = 13),\r\n        legend.key.size = unit(3,\"line\"))\r\n\r\ngirafe(ggobj = g3, width_svg = 8, height_svg = 6)\r\n\r\n\r\n\r\nChile vs Netherlands\r\n\r\n\r\nShow code\r\n\r\ng4 <- df %>%\r\n  \r\n  filter(contcod %in% c(\"CHL\", \"NLD\")) %>% \r\n  \r\n  ggplot(aes(x = group, y = RRinc, color = contcod)) +\r\n  geom_point_interactive(aes(tooltip = RRinc)) +\r\n                           geom_line() +\r\n  labs(title = \"Average per Capita Income by Decile (PPP 2005)\",\r\n       subtitle = \"Chile vs Netherlands, 1988-2008\",\r\n       caption = \"Source: Own elaboration based on Lakner-Milanovic (2013)\",\r\n       x = \"Deciles\",\r\n       y = \"USD - PPP 2005\",\r\n       col = NULL) +\r\n       scale_color_manual(values = c(\"#DA0000\", \"#f37735\")) +\r\n       scale_x_continuous(breaks=seq(1,10, by = 1), position = \"bottom\") +\r\n       scale_y_continuous(labels = dollar, limits = c(0, 40000)) +\r\n       facet_wrap(~bin_year, ncol = 3) +\r\n  theme(plot.title = element_text(size = rel(2)),\r\n        plot.subtitle = element_text(size = rel(1.4),\r\n                                     margin=margin(0,0,20,0)),\r\n        plot.caption = element_text(size = rel(.9),\r\n                                    hjust = 0,\r\n                                    face= \"italic\",\r\n                                    margin=margin(20,0,0,0)),\r\n        axis.text.x = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.text.y = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.ticks.length.x = unit(.2, \"cm\"),\r\n        axis.ticks.x = element_line(size = .3),\r\n        axis.ticks.length.y = unit(.2, \"cm\"),\r\n        axis.ticks.y = element_line(size = .3),\r\n        panel.grid.major.x = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.x = element_line(colour = \"grey92\"),\r\n        panel.grid.major.y = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.y = element_line(colour = \"grey87\"),\r\n        legend.position = c(0.87, 0.22),\r\n        legend.text = element_text(size = 13),\r\n        legend.key.size = unit(3,\"line\"))\r\n\r\ngirafe(ggobj = g4, width_svg = 8, height_svg = 6)\r\n\r\n\r\n\r\nChile vs Spain and Bolivia\r\n\r\n\r\nShow code\r\n\r\ng5 <- df %>%\r\n  \r\n  filter(contcod %in% c(\"CHL\", \"ESP\", \"BOL\")) %>% \r\n  \r\n  ggplot(aes(x = group, y = RRinc, color = contcod)) +\r\n  geom_point_interactive(aes(tooltip = RRinc)) +\r\n                           geom_line() +\r\n   labs(title = \"Average per Capita Income by Decile (PPP 2005)\",\r\n       subtitle = \"Chile vs Spain and Bolivia, 1988-2008\",\r\n       caption = \"Source: Own elaboration based on Lakner-Milanovic (2013)\",\r\n       x = \"Deciles\",\r\n       y = \"USD - PPP 2005\",\r\n       col = NULL) +\r\n       scale_color_manual(values = c(\"#239f40\", \"#DA0000\", \"#C4961A\")) +\r\n       scale_x_continuous(breaks=seq(1,10, by = 1), position = \"bottom\") +\r\n       scale_y_continuous(labels = dollar, limits = c(0, 30000)) +\r\n       facet_wrap(~bin_year, ncol = 3) +\r\n  theme(plot.title = element_text(size = rel(2)),\r\n        plot.subtitle = element_text(size = rel(1.4),\r\n                                     margin=margin(0,0,20,0)),\r\n        plot.caption = element_text(size = rel(.9),\r\n                                    hjust = 0,\r\n                                    face= \"italic\",\r\n                                    margin=margin(20,0,0,0)),\r\n        axis.text.x = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.text.y = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.ticks.length.x = unit(.2, \"cm\"),\r\n        axis.ticks.x = element_line(size = .3),\r\n        axis.ticks.length.y = unit(.2, \"cm\"),\r\n        axis.ticks.y = element_line(size = .3),\r\n        panel.grid.major.x = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.x = element_line(colour = \"grey92\"),\r\n        panel.grid.major.y = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.y = element_line(colour = \"grey87\"),\r\n        legend.position = c(0.87, 0.22),\r\n        legend.text = element_text(size = 13),\r\n        legend.key.size = unit(3,\"line\"))\r\n\r\ngirafe(ggobj = g5, width_svg = 8, height_svg = 6)\r\n\r\n\r\n\r\nInteractive Plot\r\nTo access the following link, click on the Shiny App.\r\n\r\n\r\n\r\nCódigo\r\n\r\n\r\nShow code\r\n\r\nlibrary(haven)\r\nlibrary(tidyverse)\r\nlibrary(scales)\r\nlibrary(ggthemes)\r\nlibrary(gganimate)\r\nlibrary(plotly)\r\nlibrary(ggiraph)\r\nlibrary(Cairo)\r\n\r\ndf <- read_dta(\"lm_wpid_web.dta\")\r\nattach(df)\r\n\r\nhead(df)[c(1,8,9,11)]\r\n\r\ng1 <- df %>%\r\n  \r\n  filter(contcod %in% c(\"CHL\", \"ESP\")) %>% \r\n  \r\n  ggplot(aes(x = group, y = RRinc, color = contcod)) +\r\n  geom_point_interactive(aes(tooltip = RRinc)) +\r\n                           geom_line() +\r\n  labs(title = \"Average per Capita Income by Decile (PPP 2005)\",\r\n       subtitle = \"Chile vs Spain, 1988-2008\",\r\n       caption = \"Source: Own elaboration based on Lakner-Milanovic (2013)\",\r\n       x = \"Deciles\",\r\n       y = \"USD - PPP 2005\",\r\n       col = NULL) +\r\n       scale_color_manual(values = c(\"#DA0000\", \"#C4961A\")) +\r\n       scale_x_continuous(breaks=seq(1,10, by = 1), position = \"bottom\") +\r\n       scale_y_continuous(labels = dollar) +\r\n       facet_wrap(~bin_year, ncol = 3) +\r\n  theme(plot.title = element_text(size = rel(2)),\r\n        plot.subtitle = element_text(size = rel(1.4),\r\n                                     margin=margin(0,0,20,0)),\r\n        plot.caption = element_text(size = rel(.9),\r\n                                    hjust = 0,\r\n                                    face= \"italic\",\r\n                                    margin=margin(20,0,0,0)),\r\n        axis.text.x = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.text.y = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.ticks.length.x = unit(.2, \"cm\"),\r\n        axis.ticks.x = element_line(size = .3),\r\n        axis.ticks.length.y = unit(.2, \"cm\"),\r\n        axis.ticks.y = element_line(size = .3),\r\n        panel.grid.major.x = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.x = element_line(colour = \"grey92\"),\r\n        panel.grid.major.y = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.y = element_line(colour = \"grey87\"),\r\n        legend.position = c(0.87, 0.22),\r\n        legend.text = element_text(size = 13),\r\n        legend.key.size = unit(3,\"line\"))\r\n\r\ngirafe(ggobj = g1, width_svg = 8, height_svg = 6)\r\n\r\n# To save in png format\r\nggsave(g1, filename = \"plot.png\", type = 'cairo', dpi = 300,\r\n       width = 8, height = 6)\r\n\r\n# To save with higher quality (pdf or eps)\r\nggsave(g1, filename = \"plot.pdf\", device = cairo_pdf, dpi = 300,\r\n       width = 8, height = 6)\r\n\r\nggsave(g1, filename = \"plot.eps\", device = cairo_ps, dpi = 300,\r\n       width = 8, height = 6)\r\ng2 <- df %>%\r\n  \r\n  filter(contcod %in% c(\"CHL\", \"PRT\")) %>% \r\n  \r\n  ggplot(aes(x = group, y = RRinc, color = contcod)) +\r\n  geom_point_interactive(aes(tooltip = RRinc)) +\r\n                           geom_line() +\r\n  labs(title = \"Average per Capita Income by Decile (PPP 2005)\",\r\n       subtitle = \"Chile vs Portugal, 1988-2008\",\r\n       caption = \"Source: Own elaboration based on Lakner-Milanovic (2013)\",\r\n       x = \"Deciles\",\r\n       y = \"USD - PPP 2005\",\r\n       col = NULL) +\r\n       scale_color_manual(values = c(\"#DA0000\", \"#239f40\")) +\r\n       scale_x_continuous(breaks=seq(1,10, by = 1), position = \"bottom\") +\r\n       scale_y_continuous(labels = dollar, limits = c(0, 30000)) +\r\n       facet_wrap(~bin_year, ncol = 3) +\r\n  theme(plot.title = element_text(size = rel(2)),\r\n        plot.subtitle = element_text(size = rel(1.4),\r\n                                     margin=margin(0,0,20,0)),\r\n        plot.caption = element_text(size = rel(.9),\r\n                                    hjust = 0,\r\n                                    face= \"italic\",\r\n                                    margin=margin(20,0,0,0)),\r\n        axis.text.x = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.text.y = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.ticks.length.x = unit(.2, \"cm\"),\r\n        axis.ticks.x = element_line(size = .3),\r\n        axis.ticks.length.y = unit(.2, \"cm\"),\r\n        axis.ticks.y = element_line(size = .3),\r\n        panel.grid.major.x = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.x = element_line(colour = \"grey92\"),\r\n        panel.grid.major.y = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.y = element_line(colour = \"grey87\"),\r\n        legend.position = c(0.87, 0.22),\r\n        legend.text = element_text(size = 13),\r\n        legend.key.size = unit(3,\"line\"))\r\n\r\ngirafe(ggobj = g2, width_svg = 8, height_svg = 6)\r\n\r\ng3 <- df %>%\r\n  \r\n  filter(contcod %in% c(\"CHL\", \"SWE\")) %>% \r\n  \r\n  ggplot(aes(x = group, y = RRinc, color = contcod)) +\r\n  geom_point_interactive(aes(tooltip = RRinc)) +\r\n                           geom_line() +\r\n  labs(title = \"Average per Capita Income by Decile (PPP 2005)\",\r\n       subtitle = \"Chile vs Sweden, 1988-2008\",\r\n       caption = \"Source: Own elaboration based on Lakner-Milanovic (2013)\",\r\n       x = \"Deciles\",\r\n       y = \"USD - PPP 2005\",\r\n       col = NULL) +\r\n       scale_color_manual(values = c(\"#DA0000\", \"#293352\")) +\r\n       scale_x_continuous(breaks=seq(1,10, by = 1), position = \"bottom\") +\r\n       scale_y_continuous(labels = dollar) +\r\n       facet_wrap(~bin_year, ncol = 3) +\r\n  theme(plot.title = element_text(size = rel(2)),\r\n        plot.subtitle = element_text(size = rel(1.4),\r\n                                     margin=margin(0,0,20,0)),\r\n        plot.caption = element_text(size = rel(.9),\r\n                                    hjust = 0,\r\n                                    face= \"italic\",\r\n                                    margin=margin(20,0,0,0)),\r\n        axis.text.x = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.text.y = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.ticks.length.x = unit(.2, \"cm\"),\r\n        axis.ticks.x = element_line(size = .3),\r\n        axis.ticks.length.y = unit(.2, \"cm\"),\r\n        axis.ticks.y = element_line(size = .3),\r\n        panel.grid.major.x = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.x = element_line(colour = \"grey92\"),\r\n        panel.grid.major.y = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.y = element_line(colour = \"grey87\"),\r\n        legend.position = c(0.87, 0.22),\r\n        legend.text = element_text(size = 13),\r\n        legend.key.size = unit(3,\"line\"))\r\n\r\ngirafe(ggobj = g3, width_svg = 8, height_svg = 6)\r\n\r\ng4 <- df %>%\r\n  \r\n  filter(contcod %in% c(\"CHL\", \"NLD\")) %>% \r\n  \r\n  ggplot(aes(x = group, y = RRinc, color = contcod)) +\r\n  geom_point_interactive(aes(tooltip = RRinc)) +\r\n                           geom_line() +\r\n  labs(title = \"Average per Capita Income by Decile (PPP 2005)\",\r\n       subtitle = \"Chile vs Netherlands, 1988-2008\",\r\n       caption = \"Source: Own elaboration based on Lakner-Milanovic (2013)\",\r\n       x = \"Deciles\",\r\n       y = \"USD - PPP 2005\",\r\n       col = NULL) +\r\n       scale_color_manual(values = c(\"#DA0000\", \"#f37735\")) +\r\n       scale_x_continuous(breaks=seq(1,10, by = 1), position = \"bottom\") +\r\n       scale_y_continuous(labels = dollar, limits = c(0, 40000)) +\r\n       facet_wrap(~bin_year, ncol = 3) +\r\n  theme(plot.title = element_text(size = rel(2)),\r\n        plot.subtitle = element_text(size = rel(1.4),\r\n                                     margin=margin(0,0,20,0)),\r\n        plot.caption = element_text(size = rel(.9),\r\n                                    hjust = 0,\r\n                                    face= \"italic\",\r\n                                    margin=margin(20,0,0,0)),\r\n        axis.text.x = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.text.y = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.ticks.length.x = unit(.2, \"cm\"),\r\n        axis.ticks.x = element_line(size = .3),\r\n        axis.ticks.length.y = unit(.2, \"cm\"),\r\n        axis.ticks.y = element_line(size = .3),\r\n        panel.grid.major.x = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.x = element_line(colour = \"grey92\"),\r\n        panel.grid.major.y = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.y = element_line(colour = \"grey87\"),\r\n        legend.position = c(0.87, 0.22),\r\n        legend.text = element_text(size = 13),\r\n        legend.key.size = unit(3,\"line\"))\r\n\r\ngirafe(ggobj = g4, width_svg = 8, height_svg = 6)\r\n\r\ng5 <- df %>%\r\n  \r\n  filter(contcod %in% c(\"CHL\", \"ESP\", \"BOL\")) %>% \r\n  \r\n  ggplot(aes(x = group, y = RRinc, color = contcod)) +\r\n  geom_point_interactive(aes(tooltip = RRinc)) +\r\n                           geom_line() +\r\n   labs(title = \"Average per Capita Income by Decile (PPP 2005)\",\r\n       subtitle = \"Chile vs Spain and Bolivia, 1988-2008\",\r\n       caption = \"Source: Own elaboration based on Lakner-Milanovic (2013)\",\r\n       x = \"Deciles\",\r\n       y = \"USD - PPP 2005\",\r\n       col = NULL) +\r\n       scale_color_manual(values = c(\"#239f40\", \"#DA0000\", \"#C4961A\")) +\r\n       scale_x_continuous(breaks=seq(1,10, by = 1), position = \"bottom\") +\r\n       scale_y_continuous(labels = dollar, limits = c(0, 30000)) +\r\n       facet_wrap(~bin_year, ncol = 3) +\r\n  theme(plot.title = element_text(size = rel(2)),\r\n        plot.subtitle = element_text(size = rel(1.4),\r\n                                     margin=margin(0,0,20,0)),\r\n        plot.caption = element_text(size = rel(.9),\r\n                                    hjust = 0,\r\n                                    face= \"italic\",\r\n                                    margin=margin(20,0,0,0)),\r\n        axis.text.x = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.text.y = element_text(angle = 0, vjust=.5, size = 10),\r\n        axis.ticks.length.x = unit(.2, \"cm\"),\r\n        axis.ticks.x = element_line(size = .3),\r\n        axis.ticks.length.y = unit(.2, \"cm\"),\r\n        axis.ticks.y = element_line(size = .3),\r\n        panel.grid.major.x = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.x = element_line(colour = \"grey92\"),\r\n        panel.grid.major.y = element_line(colour = \"grey87\"),\r\n        panel.grid.minor.y = element_line(colour = \"grey87\"),\r\n        legend.position = c(0.87, 0.22),\r\n        legend.text = element_text(size = 13),\r\n        legend.key.size = unit(3,\"line\"))\r\n\r\ngirafe(ggobj = g5, width_svg = 8, height_svg = 6)\r\n\r\nknitr::include_graphics(\"captura.png\")\r\n\r\n\r\nReferences\r\nLakner-Milanovic (2013) World Panel Income Distribution (LM-WPID)\r\nOperador pipe\r\ntidyverse\r\n\r\n\r\n\r\n",
    "preview": "projects/2023-11-12-ingreso-promedio-per-cpita/plot.png",
    "last_modified": "2023-11-12T16:13:11+00:00",
    "input_file": {}
  }
]
